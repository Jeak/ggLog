<!doctype html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
<script>
function d3demo()
{
  var data= [1,2,5,9,12,8,3,5,2];
  var tdiv = d3.select("#d3stuff");
  for(var i=0;i<data.length;++i)
  {
    tdiv.append("div")
      .style("background-color", "steelblue")
      .style("color", "white")
      .style("width", data[i]*20 + "px")
      .style("height", "15px")
      .style("margin", "1px")
      .style("text-align", "right")
      .style("padding", "2px")
      .html(data[i]);
  }

}
function d3demob()
{
  //var data= [1,2,5,9,12,13,parseInt(Math.random()*40),3,5,2];
  var data = [];
  for(var i=0;i<10;++i)
  {
    data.push(parseInt(Math.random()*40));
    if(data[i] == 26)
      data[i] = 70-parseInt(Math.random()*5);
  }
  var dmax = 0;
  for(var i=0;i<data.length;++i)
  {
    if(dmax < data[i])
      dmax = data[i];
  }

  var rnd = Math.ceil(dmax/40)*5;

  dmax = Math.ceil(dmax/rnd)*rnd;

  var tch = d3.select(".chart");

  var maxheight = 220;

  var diff = maxheight/dmax;

  tch.html("");

  tch.style("height", (dmax*diff+20)+"px")
     .style("width", (data.length*20+30)+"px");

  for(var i=0;i<=dmax/rnd;++i)
  {
    tch.append("line")
      .attr("x1", 0)
      .attr("y1", i*diff*rnd+20)
      .attr("x2", data.length*20+17)
      .attr("y2", i*diff*rnd+20)
      .attr("style", "stroke:#aaaaaa;width:0.5px;");
    tch.append("g")
      .attr("transform", "translate("+ (data.length*20+30) +","+ (i*diff*rnd+20) +")")
    .append("text")
      .attr("style", "fill:#bbbbbb")
      .text(dmax-i*rnd);
  }

  for(var i=0;i<data.length;++i)
  {
    var bar = tch.append("g")
      .attr("transform", "translate(" + (20*i) + ", " + (dmax*diff+20-diff*data[i]) + ")");
    bar.append("rect")
      .on('click', function(){cchanger(this)})
      .attr("width", 19)
      .attr("height", diff*data[i]);
    bar.append("text")
      .attr("x", 13)
      .attr("y", (-5)+"px")
      .on('click', function(){cchanger(this)})
      .text(data[i]);
  }
}
function cchanger(tinput)
{
  var cparts = d3.select(".chart").select(".special").classed("special", false);
  d3.select(tinput).classed("special", true);
  //alert(d3.select(tinput).classed("special"));
}
</script>
  <style>
    .chart rect {
      fill: #106000;
    }
    .chart rect.special{
      fill: #10C300;
    }
    .chart text {
      fill: #003300;
      font: 10px sans-serif;
      text-anchor: end;
    }
  </style>
</head>
<body>

    <!--div id="d3stuff">
    </div>
    <br />
    <button onclick="d3demo()">Basic HTML demo</button>
<br /><br /-->
What do you think of these graphs?<br />
  <svg class="chart" height="240">
  </svg>
  <!--br /><br />
  <button onclick="d3demob()">Basic SVG demo</button-->
  <script>d3demob();</script>
</body>
</html>
